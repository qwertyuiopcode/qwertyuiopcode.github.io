var mygitalkConfig = {};
var md5 = require('md5-node');
module.exports = {
    book: {
        assets: "./assets",
        css: [
            "https://unpkg.com/gitalk/dist/gitalk.css",
        ],
        js: [
            "https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js",
            "https://unpkg.com/gitalk/dist/gitalk.min.js",
            "mygitalk.js"
        ]
    },
    hooks: {
        "init": function() {
            this.log.debug.ln('init', this.options.pluginsConfig.mygitalk);

            //mygitalkConfig = this.options.pluginsConfig["mygitalk"];
            mygitalkConfig = {
            "clientID": "1ab403a66e19e88a5212",
            "clientSecret": "5a966e069f1fd6aba15122cffe1513096e4b936d",
            "repo": "qwertyuiopcode.github.io",
            "owner": "qwertyuiopcode",
            "admin": ["qwertyuiopcode"],
            //"id": md5(location.href),
            "distractionFreeMode": false,
            "proxy": 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token'
        }
        },
        "page:before": function(page) {
            this.log.debug.ln('page:before', page.content);

            if (mygitalkConfig) {
                var str = '<div id="gitalk-container"></div>';

                page.content = page.content + '\n' + str;
            }

            return page;
        }
    }
};